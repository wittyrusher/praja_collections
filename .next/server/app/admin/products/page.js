(()=>{var e={};e.id=122,e.ids=[122],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},31673:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(65643),r(45460),r(35866);var s=r(23191),a=r(88716),l=r(37922),i=r.n(l),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65643)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\products\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,45460)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\products\\page.tsx"],m="/admin/products/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38241:(e,t,r)=>{Promise.resolve().then(r.bind(r,2991))},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(10326),a=r(17577),l=r(77109),i=r(35047),n=r(90434),o=r(83855),c=r(88307),d=r(46226);let m=(0,r(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=r(98091),u=r(28932),p=r(99837);function h({products:e,onEdit:t,onDelete:r}){return(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden",children:[s.jsx("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Image"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"relative w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx(d.default,{src:e.images[0]||"/placeholder-product.jpg",alt:e.name,fill:!0,className:"object-cover"})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:e.name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-600",children:e.category})}),s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:(0,u.xG)(e.discountPrice||e.price)}),e.discountPrice&&s.jsx("div",{className:"text-gray-500 line-through",children:(0,u.xG)(e.price)})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`text-sm font-medium ${0===e.stock?"text-red-600":e.stock<10?"text-yellow-600":"text-green-600"}`,children:e.stock})}),s.jsx("td",{className:"px-6 py-4",children:e.featured&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:"Featured"})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[s.jsx(p.Z,{size:"sm",variant:"secondary",onClick:()=>t(e),children:s.jsx(m,{className:"w-4 h-4"})}),s.jsx(p.Z,{size:"sm",variant:"danger",onClick:()=>r(e._id),children:s.jsx(x.Z,{className:"w-4 h-4"})})]})]},e._id))})]}),0===e.length&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No products found"})]})}var y=r(16545),g=r(40381);function f(){let{data:e,status:t}=(0,l.useSession)(),r=(0,i.useRouter)(),[d,m]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),[f,j]=(0,a.useState)(""),v=async()=>{u(!0);try{let e=await fetch("/api/products?limit=100"),t=await e.json();if(t.success){let e=t.products.filter(e=>e&&e.name&&e.category);m(e)}else g.ZP.error(t.error||"Failed to load products")}catch(e){console.error("Error fetching products:",e),g.ZP.error("Failed to load products")}finally{u(!1)}},N=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=await fetch(`/api/products/${e}`,{method:"DELETE"}),r=await t.json();r.success?(g.ZP.success("Product deleted successfully"),v()):g.ZP.error(r.error||"Failed to delete product")}catch(e){console.error("Error deleting product:",e),g.ZP.error("Failed to delete product")}},w=d.filter(e=>{let t=e.name?.toLowerCase()||"",r=e.category?.toLowerCase()||"",s=f.toLowerCase();return t.includes(s)||r.includes(s)});return"loading"===t||x?s.jsx(y.Z,{text:"Loading products..."}):e&&"admin"===e.user.role?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Products"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Products: ",w.length]})]}),s.jsx("div",{className:"mt-4 md:mt-0",children:s.jsx(n.default,{href:"/admin/add-product",children:(0,s.jsxs)(p.Z,{children:[s.jsx(o.Z,{className:"w-5 h-5 mr-2"}),"Add New Product"]})})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search products by name or category...",value:f,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})}),s.jsx(h,{products:w,onEdit:e=>{r.push(`/admin/add-product?id=${e._id}`)},onDelete:N})]}):null}},99837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);function a({variant:e="primary",size:t="md",isLoading:r=!1,children:a,className:l="",disabled:i,...n}){return s.jsx("button",{className:`font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]} ${l}`,disabled:i||r,...n,children:r?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):a})}r(17577)},16545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);function a({size:e="md",text:t}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:`animate-spin text-primary-600 ${{sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[e]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&s.jsx("p",{className:"mt-4 text-gray-600",children:t})]})}r(17577)},28932:(e,t,r)=>{"use strict";r.d(t,{Et:()=>l,p6:()=>a,xG:()=>s});let s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),l=(e,t)=>Math.round((e-t)/e*100)},65643:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\ADMIN\praja-collections\src\app\admin\products\page.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,921,621,226,556],()=>r(31673));module.exports=s})();