(()=>{var e={};e.id=104,e.ids=[104],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},68073:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(62775),s(45460),s(35866);var t=s(23191),a=s(88716),i=s(37922),o=s.n(i),l=s(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(r,n);let d=["",{children:["admin",{children:["add-product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,62775)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\add-product\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,45460)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\add-product\\page.tsx"],m="/admin/add-product/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/add-product/page",pathname:"/admin/add-product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34819:(e,r,s)=>{Promise.resolve().then(s.bind(s,18431))},86333:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35047:(e,r,s)=>{"use strict";var t=s(77389);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},18431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>g});var t=s(10326),a=s(17577),i=s(77109),o=s(35047),l=s(86333);let n=(0,s(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var d=s(94019),c=s(89175),m=s(99837),u=s(16545),p=s(80739),x=s(40381),h=s(90434);function g(){let{data:e,status:r}=(0,i.useSession)(),s=(0,o.useRouter)(),g=(0,o.useSearchParams)().get("id"),y=!!g,[b,f]=(0,a.useState)({name:"",description:"",price:"",discountPrice:"",category:p.aA[0].slug,images:[],stock:"",sizes:[],colors:[],featured:!1}),[j,v]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[P,k]=(0,a.useState)(!1),[C,Z]=(0,a.useState)({}),q=e=>{let{name:r,value:s,type:t}=e.target,a=e.target.checked;f(e=>({...e,[r]:"checkbox"===t?a:s})),C[r]&&Z(e=>({...e,[r]:""}))},A=e=>{f(r=>({...r,images:r.images.filter((r,s)=>s!==e)}))},S=e=>{f(r=>({...r,sizes:r.sizes.includes(e)?r.sizes.filter(r=>r!==e):[...r.sizes,e]}))},z=e=>{f(r=>({...r,colors:r.colors.includes(e)?r.colors.filter(r=>r!==e):[...r.colors,e]}))},D=()=>{let e={};return b.name.trim()||(e.name="Product name is required"),b.description.trim()||(e.description="Description is required"),(!b.price||0>=parseFloat(b.price))&&(e.price="Valid price is required"),b.discountPrice&&parseFloat(b.discountPrice)>=parseFloat(b.price)&&(e.discountPrice="Discount price must be less than price"),b.category||(e.category="Category is required"),0===b.images.length&&(e.images="At least one image is required"),(!b.stock||0>parseInt(b.stock))&&(e.stock="Valid stock quantity is required"),Z(e),0===Object.keys(e).length},_=async e=>{if(e.preventDefault(),!D()){x.ZP.error("Please fix the errors in the form");return}w(!0);try{let e={name:b.name,description:b.description,price:parseFloat(b.price),discountPrice:b.discountPrice?parseFloat(b.discountPrice):void 0,category:b.category,images:b.images,stock:parseInt(b.stock),sizes:b.sizes,colors:b.colors,featured:b.featured},r=y?`/api/products/${g}`:"/api/products",t=await fetch(r,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();a.success?(x.ZP.success(y?"Product updated successfully":"Product added successfully"),s.push("/admin/products")):x.ZP.error(a.error||"Failed to save product")}catch(e){console.error("Error saving product:",e),x.ZP.error("Failed to save product")}finally{w(!1)}};return"loading"===r||P?t.jsx(u.Z,{text:"Loading..."}):e&&"admin"===e.user.role?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,t.jsxs)(h.default,{href:"/admin/products",className:"inline-flex items-center text-primary-600 hover:text-primary-700 mb-6",children:[t.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:y?"Edit Product":"Add New Product"}),t.jsx("p",{className:"text-gray-600",children:y?"Update product details below":"Fill in the product details below"})]}),(0,t.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(c.Z,{label:"Product Name",name:"name",value:b.name,onChange:q,error:C.name,placeholder:"e.g., Cotton T-Shirt",required:!0}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{name:"description",value:b.description,onChange:q,rows:4,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${C.description?"border-red-500":"border-gray-300"}`,placeholder:"Detailed product description...",required:!0}),C.description&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.description})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsx("select",{name:"category",value:b.category,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",required:!0,children:p.aA.map(e=>t.jsx("option",{value:e.slug,children:e.name},e.slug))})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pricing & Inventory"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(c.Z,{label:"Price (₹)",name:"price",type:"number",step:"0.01",value:b.price,onChange:q,error:C.price,placeholder:"1999",required:!0}),t.jsx(c.Z,{label:"Discount Price (₹)",name:"discountPrice",type:"number",step:"0.01",value:b.discountPrice,onChange:q,error:C.discountPrice,placeholder:"1499 (optional)"}),t.jsx(c.Z,{label:"Stock Quantity",name:"stock",type:"number",value:b.stock,onChange:q,error:C.stock,placeholder:"100",required:!0})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Product Images"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(c.Z,{label:"",value:j,onChange:e=>v(e.target.value),placeholder:"Enter image URL (https://...)",className:"flex-grow"}),(0,t.jsxs)(m.Z,{type:"button",onClick:()=>{if(!j.trim()){x.ZP.error("Please enter an image URL");return}if(!j.match(/^https?:\/\/.+\.(jpg|jpeg|png|webp|gif)$/i)){x.ZP.error("Please enter a valid image URL");return}if(b.images.includes(j)){x.ZP.error("Image already added");return}f(e=>({...e,images:[...e.images,j]})),v("")},variant:"secondary",className:"mt-0",children:[t.jsx(n,{className:"w-5 h-5 mr-2"}),"Add"]})]}),C.images&&t.jsx("p",{className:"text-sm text-red-600",children:C.images}),b.images.length>0&&t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:b.images.map((e,r)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[t.jsx("img",{src:e,alt:`Product ${r+1}`,className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>A(r),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(d.Z,{className:"w-4 h-4"})})]}),0===r&&t.jsx("span",{className:"absolute bottom-2 left-2 bg-primary-600 text-white text-xs px-2 py-1 rounded",children:"Primary"})]},r))}),t.jsx("p",{className:"text-sm text-gray-600",children:"\uD83D\uDCA1 Tip: Use high-quality images. First image will be the primary display image."})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Available Sizes"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:p.zf.map(e=>t.jsx("button",{type:"button",onClick:()=>S(e),className:`px-4 py-2 border-2 rounded-lg font-medium transition ${b.sizes.includes(e)?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-300 hover:border-gray-400"}`,children:e},e))}),t.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Select applicable sizes for this product"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Available Colors"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:p.DM.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>z(e.name),className:`px-4 py-2 border-2 rounded-lg font-medium transition ${b.colors.includes(e.name)?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx("span",{className:"inline-block w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.value}}),e.name]},e.name))}),t.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Select available colors for this product"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Additional Options"}),(0,t.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"featured",checked:b.featured,onChange:q,className:"w-5 h-5 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-gray-900",children:"Featured Product"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Display this product on the home page"})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[t.jsx(m.Z,{type:"submit",isLoading:N,className:"flex-1",children:y?"Update Product":"Add Product"}),t.jsx(m.Z,{type:"button",variant:"outline",onClick:()=>s.push("/admin/products"),disabled:N,children:"Cancel"})]})]})]}):null}},99837:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(10326);function a({variant:e="primary",size:r="md",isLoading:s=!1,children:a,className:i="",disabled:o,...l}){return t.jsx("button",{className:`font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]} ${i}`,disabled:o||s,...l,children:s?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):a})}s(17577)},89175:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(10326);function a({label:e,error:r,className:s="",...a}){return(0,t.jsxs)("div",{className:"w-full",children:[e&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsx("input",{className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${r?"border-red-500":"border-gray-300"} ${s}`,...a}),r&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]})}s(17577)},16545:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(10326);function a({size:e="md",text:r}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsxs)("svg",{className:`animate-spin text-primary-600 ${{sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[e]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&t.jsx("p",{className:"mt-4 text-gray-600",children:r})]})}s(17577)},62775:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\ADMIN\praja-collections\src\app\admin\add-product\page.tsx#default`)},73881:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,921,621,556],()=>s(68073));module.exports=t})();