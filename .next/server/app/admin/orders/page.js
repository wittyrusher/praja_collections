(()=>{var e={};e.id=606,e.ids=[606],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},76915:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(86737),r(45460),r(35866);var s=r(23191),a=r(88716),n=r(37922),l=r.n(n),o=r(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,86737)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\orders\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,45460)),"C:\\Users\\ADMIN\\praja-collections\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\ADMIN\\praja-collections\\src\\app\\admin\\orders\\page.tsx"],m="/admin/orders/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},85755:(e,t,r)=>{Promise.resolve().then(r.bind(r,77763))},12714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},77763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(10326),a=r(17577),n=r(77109),l=r(35047),o=r(88307),i=r(12714),d=r(28932),c=r(99837),m=r(80739);function x({orders:e,onView:t,onStatusChange:r}){let a=e=>{let t=m.DF.find(t=>t.value===e);return t?.color||"gray"},n=e=>({yellow:"bg-yellow-100 text-yellow-800",blue:"bg-white-100 text-blue-800",purple:"bg-purple-100 text-purple-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden",children:[s.jsx("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Order ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("span",{className:"text-sm font-mono text-gray-900",children:["#",e._id.slice(-8).toUpperCase()]})}),s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.shippingAddress.name}),s.jsx("div",{className:"text-gray-500",children:e.shippingAddress.phone})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-600",children:(0,d.p6)(e.createdAt)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:(0,d.xG)(e.totalAmount)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"completed"===e.paymentInfo.paymentStatus?"bg-green-100 text-green-800":"failed"===e.paymentInfo.paymentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e.paymentInfo.paymentStatus})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("select",{value:e.orderStatus,onChange:t=>r(e._id,t.target.value),className:`text-xs font-medium px-2.5 py-1 rounded-full ${n(a(e.orderStatus))}`,children:m.DF.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx(c.Z,{size:"sm",variant:"secondary",onClick:()=>t(e),children:s.jsx(i.Z,{className:"w-4 h-4"})})})]},e._id))})]}),0===e.length&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No orders found"})]})}var p=r(16545),u=r(40381);function h(){let{data:e,status:t}=(0,n.useSession)(),r=(0,l.useRouter)(),[i,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(!0),[h,y]=(0,a.useState)(""),[g,f]=(0,a.useState)(null),j=async()=>{m(!0);try{let e=await fetch("/api/orders"),t=await e.json();t.success&&d(t.orders)}catch(e){console.error("Error fetching orders:",e),u.ZP.error("Failed to load orders")}finally{m(!1)}},b=async(e,t)=>{try{let r=await fetch(`/api/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderStatus:t})}),s=await r.json();s.success?(u.ZP.success("Order status updated"),j()):u.ZP.error(s.error||"Failed to update order")}catch(e){console.error("Error updating order:",e),u.ZP.error("Failed to update order")}},v=i.filter(e=>e._id.toLowerCase().includes(h.toLowerCase())||e.shippingAddress.name.toLowerCase().includes(h.toLowerCase()));return"loading"===t||c?s.jsx(p.Z,{text:"Loading orders..."}):e&&"admin"===e.user.role?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Orders"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Orders: ",v.length]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search orders by ID or customer name...",value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})}),s.jsx(x,{orders:v,onView:e=>{r.push(`/orders/${e._id}`)},onStatusChange:b})]}):null}},99837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);function a({variant:e="primary",size:t="md",isLoading:r=!1,children:a,className:n="",disabled:l,...o}){return s.jsx("button",{className:`font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]} ${n}`,disabled:l||r,...o,children:r?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):a})}r(17577)},16545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);function a({size:e="md",text:t}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:`animate-spin text-primary-600 ${{sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[e]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&s.jsx("p",{className:"mt-4 text-gray-600",children:t})]})}r(17577)},28932:(e,t,r)=>{"use strict";r.d(t,{Et:()=>n,p6:()=>a,xG:()=>s});let s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),n=(e,t)=>Math.round((e-t)/e*100)},86737:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\ADMIN\praja-collections\src\app\admin\orders\page.tsx#default`)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,921,621,556],()=>r(76915));module.exports=s})();