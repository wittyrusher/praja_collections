(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{9671:function(e,r,t){Promise.resolve().then(t.bind(t,7821))},9205:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var s=t(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&t.indexOf(e)===r).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:l="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:r,...n,width:a,height:a,stroke:t,strokeWidth:c?24*Number(o)/Number(a):o,className:i("lucide",l),...m},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),c=(e,r)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:c,...l}=t;return(0,s.createElement)(o,{ref:n,iconNode:r,className:i("lucide-".concat(a(e)),c),...l})});return t.displayName="".concat(e),t}},2660:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2224:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},7821:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var s=t(7437),a=t(2265),i=t(605),n=t(9376),o=t(2660);let c=(0,t(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var l=t(2224),d=t(2827),u=t(6334),m=t(1215),p=t(7099),h=t(9064),x=t(7648);function g(){let{data:e,status:r}=(0,i.useSession)(),t=(0,n.useRouter)(),g=(0,n.useSearchParams)().get("id"),f=!!g,[y,b]=(0,a.useState)({name:"",description:"",price:"",discountPrice:"",category:p.aA[0].slug,images:[],stock:"",sizes:[],colors:[],featured:!1}),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[P,k]=(0,a.useState)(!1),[C,Z]=(0,a.useState)({});(0,a.useEffect)(()=>{if("unauthenticated"===r)t.push("/login");else if("authenticated"===r){var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.role)!=="admin"?t.push("/"):f&&S()}},[r,e,g]);let S=async()=>{k(!0);try{let r=await fetch("/api/products/".concat(g)),s=await r.json();if(s.success){var e;let r=s.product;b({name:r.name,description:r.description,price:r.price.toString(),discountPrice:(null===(e=r.discountPrice)||void 0===e?void 0:e.toString())||"",category:r.category,images:r.images,stock:r.stock.toString(),sizes:r.sizes||[],colors:r.colors||[],featured:r.featured})}else h.ZP.error("Product not found"),t.push("/admin/products")}catch(e){console.error("Error fetching product:",e),h.ZP.error("Failed to load product")}finally{k(!1)}},F=e=>{let{name:r,value:t,type:s}=e.target,a=e.target.checked;b(e=>({...e,[r]:"checkbox"===s?a:t})),C[r]&&Z(e=>({...e,[r]:""}))},z=e=>{b(r=>({...r,images:r.images.filter((r,t)=>t!==e)}))},A=e=>{b(r=>({...r,sizes:r.sizes.includes(e)?r.sizes.filter(r=>r!==e):[...r.sizes,e]}))},q=e=>{b(r=>({...r,colors:r.colors.includes(e)?r.colors.filter(r=>r!==e):[...r.colors,e]}))},D=()=>{let e={};return y.name.trim()||(e.name="Product name is required"),y.description.trim()||(e.description="Description is required"),(!y.price||0>=parseFloat(y.price))&&(e.price="Valid price is required"),y.discountPrice&&parseFloat(y.discountPrice)>=parseFloat(y.price)&&(e.discountPrice="Discount price must be less than price"),y.category||(e.category="Category is required"),0===y.images.length&&(e.images="At least one image is required"),(!y.stock||0>parseInt(y.stock))&&(e.stock="Valid stock quantity is required"),Z(e),0===Object.keys(e).length},E=async e=>{if(e.preventDefault(),!D()){h.ZP.error("Please fix the errors in the form");return}w(!0);try{let e={name:y.name,description:y.description,price:parseFloat(y.price),discountPrice:y.discountPrice?parseFloat(y.discountPrice):void 0,category:y.category,images:y.images,stock:parseInt(y.stock),sizes:y.sizes,colors:y.colors,featured:y.featured},r=f?"/api/products/".concat(g):"/api/products",s=await fetch(r,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();a.success?(h.ZP.success(f?"Product updated successfully":"Product added successfully"),t.push("/admin/products")):h.ZP.error(a.error||"Failed to save product")}catch(e){console.error("Error saving product:",e),h.ZP.error("Failed to save product")}finally{w(!1)}};return"loading"===r||P?(0,s.jsx)(m.Z,{text:"Loading..."}):e&&"admin"===e.user.role?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,s.jsxs)(x.default,{href:"/admin/products",className:"inline-flex items-center text-primary-600 hover:text-primary-700 mb-6",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:f?"Edit Product":"Add New Product"}),(0,s.jsx)("p",{className:"text-gray-600",children:f?"Update product details below":"Fill in the product details below"})]}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(d.Z,{label:"Product Name",name:"name",value:y.name,onChange:F,error:C.name,placeholder:"e.g., Cotton T-Shirt",required:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:y.description,onChange:F,rows:4,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ".concat(C.description?"border-red-500":"border-gray-300"),placeholder:"Detailed product description...",required:!0}),C.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:C.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsx)("select",{name:"category",value:y.category,onChange:F,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",required:!0,children:p.aA.map(e=>(0,s.jsx)("option",{value:e.slug,children:e.name},e.slug))})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pricing & Inventory"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(d.Z,{label:"Price (₹)",name:"price",type:"number",step:"0.01",value:y.price,onChange:F,error:C.price,placeholder:"1999",required:!0}),(0,s.jsx)(d.Z,{label:"Discount Price (₹)",name:"discountPrice",type:"number",step:"0.01",value:y.discountPrice,onChange:F,error:C.discountPrice,placeholder:"1499 (optional)"}),(0,s.jsx)(d.Z,{label:"Stock Quantity",name:"stock",type:"number",value:y.stock,onChange:F,error:C.stock,placeholder:"100",required:!0})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Product Images"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(d.Z,{label:"",value:v,onChange:e=>j(e.target.value),placeholder:"Enter image URL (https://...)",className:"flex-grow"}),(0,s.jsxs)(u.Z,{type:"button",onClick:()=>{if(!v.trim()){h.ZP.error("Please enter an image URL");return}if(!v.match(/^https?:\/\/.+\.(jpg|jpeg|png|webp|gif)$/i)){h.ZP.error("Please enter a valid image URL");return}if(y.images.includes(v)){h.ZP.error("Image already added");return}b(e=>({...e,images:[...e.images,v]})),j("")},variant:"secondary",className:"mt-0",children:[(0,s.jsx)(c,{className:"w-5 h-5 mr-2"}),"Add"]})]}),C.images&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:C.images}),y.images.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.images.map((e,r)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:e,alt:"Product ".concat(r+1),className:"w-full h-full object-cover"}),(0,s.jsx)("button",{type:"button",onClick:()=>z(r),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(l.Z,{className:"w-4 h-4"})})]}),0===r&&(0,s.jsx)("span",{className:"absolute bottom-2 left-2 bg-primary-600 text-white text-xs px-2 py-1 rounded",children:"Primary"})]},r))}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"\uD83D\uDCA1 Tip: Use high-quality images. First image will be the primary display image."})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Available Sizes"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:p.zf.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>A(e),className:"px-4 py-2 border-2 rounded-lg font-medium transition ".concat(y.sizes.includes(e)?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-300 hover:border-gray-400"),children:e},e))}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-3",children:"Select applicable sizes for this product"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Available Colors"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:p.DM.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>q(e.name),className:"px-4 py-2 border-2 rounded-lg font-medium transition ".concat(y.colors.includes(e.name)?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-300 hover:border-gray-400"),children:[(0,s.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.value}}),e.name]},e.name))}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-3",children:"Select available colors for this product"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Additional Options"}),(0,s.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:"featured",checked:y.featured,onChange:F,className:"w-5 h-5 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Featured Product"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Display this product on the home page"})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(u.Z,{type:"submit",isLoading:N,className:"flex-1",children:f?"Update Product":"Add Product"}),(0,s.jsx)(u.Z,{type:"button",variant:"outline",onClick:()=>t.push("/admin/products"),disabled:N,children:"Cancel"})]})]})]}):null}},6334:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var s=t(7437);function a(e){let{variant:r="primary",size:t="md",isLoading:a=!1,children:i,className:n="",disabled:o,...c}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[r]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]," ").concat(n),disabled:o||a,...c,children:a?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):i})}t(2265)},2827:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var s=t(7437);function a(e){let{label:r,error:t,className:a="",...i}=e;return(0,s.jsxs)("div",{className:"w-full",children:[r&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,s.jsx)("input",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ".concat(t?"border-red-500":"border-gray-300"," ").concat(a),...i}),t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t})]})}t(2265)},1215:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var s=t(7437);function a(e){let{size:r="md",text:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:"animate-spin text-primary-600 ".concat({sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[r]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:t})]})}t(2265)},7099:function(e,r,t){"use strict";t.d(r,{DF:function(){return o},DM:function(){return n},aA:function(){return a},iC:function(){return s},zf:function(){return i}});let s="Praja Collections",a=[{name:"Men",slug:"men"},{name:"Women",slug:"women"},{name:"Kids",slug:"kids"},{name:"Accessories",slug:"accessories"},{name:"Footwear",slug:"footwear"}],i=["XS","S","M","L","XL","XXL"],n=[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Red",value:"#EF4444"},{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Yellow",value:"#F59E0B"}],o=[{value:"pending",label:"Pending",color:"yellow"},{value:"processing",label:"Processing",color:"blue"},{value:"shipped",label:"Shipped",color:"purple"},{value:"delivered",label:"Delivered",color:"green"},{value:"cancelled",label:"Cancelled",color:"red"}]}},function(e){e.O(0,[64,648,605,971,117,744],function(){return e(e.s=9671)}),_N_E=e.O()}]);