(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{4709:function(e,t,r){Promise.resolve().then(r.bind(r,8298))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:r,strokeWidth:c?24*Number(o)/Number(a):o,className:n("lucide",i),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:c,...i}=r;return(0,s.createElement)(o,{ref:l,iconNode:t,className:n("lucide-".concat(a(e)),c),...i})});return r.displayName="".concat(e),r}},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8298:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7437),a=r(2265),n=r(605),l=r(9376),o=r(3247),c=r(2208),i=r(2746),d=r(6334),u=r(7099);function m(e){let{orders:t,onView:r,onStatusChange:a}=e,n=e=>{let t=u.DF.find(t=>t.value===e);return(null==t?void 0:t.color)||"gray"},l=e=>({yellow:"bg-yellow-100 text-yellow-800",blue:"bg-white-100 text-blue-800",purple:"bg-purple-100 text-purple-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Order ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Customer"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("span",{className:"text-sm font-mono text-gray-900",children:["#",e._id.slice(-8).toUpperCase()]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.shippingAddress.name}),(0,s.jsx)("div",{className:"text-gray-500",children:e.shippingAddress.phone})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"text-sm text-gray-600",children:(0,i.p6)(e.createdAt)})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(0,i.xG)(e.totalAmount)})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.paymentInfo.paymentStatus?"bg-green-100 text-green-800":"failed"===e.paymentInfo.paymentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.paymentInfo.paymentStatus})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("select",{value:e.orderStatus,onChange:t=>a(e._id,t.target.value),className:"text-xs font-medium px-2.5 py-1 rounded-full ".concat(l(n(e.orderStatus))),children:u.DF.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsx)(d.Z,{size:"sm",variant:"secondary",onClick:()=>r(e),children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})})]},e._id))})]}),0===t.length&&(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No orders found"})]})}var x=r(1215),p=r(9064);function h(){let{data:e,status:t}=(0,n.useSession)(),r=(0,l.useRouter)(),[c,i]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[h,y]=(0,a.useState)(""),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{if("unauthenticated"===t)r.push("/login");else if("authenticated"===t){var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.role)!=="admin"?r.push("/"):v()}},[t,e]);let v=async()=>{u(!0);try{let e=await fetch("/api/orders"),t=await e.json();t.success&&i(t.orders)}catch(e){console.error("Error fetching orders:",e),p.ZP.error("Failed to load orders")}finally{u(!1)}},b=async(e,t)=>{try{let r=await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderStatus:t})}),s=await r.json();s.success?(p.ZP.success("Order status updated"),v()):p.ZP.error(s.error||"Failed to update order")}catch(e){console.error("Error updating order:",e),p.ZP.error("Failed to update order")}},j=c.filter(e=>e._id.toLowerCase().includes(h.toLowerCase())||e.shippingAddress.name.toLowerCase().includes(h.toLowerCase()));return"loading"===t||d?(0,s.jsx)(x.Z,{text:"Loading orders..."}):e&&"admin"===e.user.role?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Orders"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Orders: ",j.length]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search orders by ID or customer name...",value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})}),(0,s.jsx)(m,{orders:j,onView:e=>{r.push("/orders/".concat(e._id))},onStatusChange:b})]}):null}},6334:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{variant:t="primary",size:r="md",isLoading:a=!1,children:n,className:l="",disabled:o,...c}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(l),disabled:o||a,...c,children:a?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):n})}r(2265)},1215:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{size:t="md",text:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:"animate-spin text-primary-600 ".concat({sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[t]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:r})]})}r(2265)},7099:function(e,t,r){"use strict";r.d(t,{DF:function(){return o},DM:function(){return l},aA:function(){return a},iC:function(){return s},zf:function(){return n}});let s="Praja Collections",a=[{name:"Men",slug:"men"},{name:"Women",slug:"women"},{name:"Kids",slug:"kids"},{name:"Accessories",slug:"accessories"},{name:"Footwear",slug:"footwear"}],n=["XS","S","M","L","XL","XXL"],l=[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Red",value:"#EF4444"},{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Yellow",value:"#F59E0B"}],o=[{value:"pending",label:"Pending",color:"yellow"},{value:"processing",label:"Processing",color:"blue"},{value:"shipped",label:"Shipped",color:"purple"},{value:"delivered",label:"Delivered",color:"green"},{value:"cancelled",label:"Cancelled",color:"red"}]},2746:function(e,t,r){"use strict";r.d(t,{Et:function(){return n},p6:function(){return a},xG:function(){return s}});let s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),n=(e,t)=>Math.round((e-t)/e*100)}},function(e){e.O(0,[64,605,971,117,744],function(){return e(e.s=4709)}),_N_E=e.O()}]);