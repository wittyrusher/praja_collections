(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{6355:function(e,t,r){Promise.resolve().then(r.bind(r,2714))},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2714:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7437),a=r(2265),c=r(605),n=r(9376),l=r(7648),i=r(9397),o=r(3247),d=r(3145);let u=(0,r(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=r(8930),x=r(2746),h=r(6334);function p(e){let{products:t,onEdit:r,onDelete:a}=e;return(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Image"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"relative w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:(0,s.jsx)(d.default,{src:e.images[0]||"/placeholder-product.jpg",alt:e.name,fill:!0,className:"object-cover"})})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.category})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-semibold text-gray-900",children:(0,x.xG)(e.discountPrice||e.price)}),e.discountPrice&&(0,s.jsx)("div",{className:"text-gray-500 line-through",children:(0,x.xG)(e.price)})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"text-sm font-medium ".concat(0===e.stock?"text-red-600":e.stock<10?"text-yellow-600":"text-green-600"),children:e.stock})}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.featured&&(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:"Featured"})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,s.jsx)(h.Z,{size:"sm",variant:"secondary",onClick:()=>r(e),children:(0,s.jsx)(u,{className:"w-4 h-4"})}),(0,s.jsx)(h.Z,{size:"sm",variant:"danger",onClick:()=>a(e._id),children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})})]})]},e._id))})]}),0===t.length&&(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No products found"})]})}var y=r(1215),f=r(9064);function g(){let{data:e,status:t}=(0,c.useSession)(),r=(0,n.useRouter)(),[d,u]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[g,j]=(0,a.useState)("");(0,a.useEffect)(()=>{if("unauthenticated"===t)r.push("/login");else if("authenticated"===t){var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.role)!=="admin"?r.push("/"):N()}},[t,e]);let N=async()=>{x(!0);try{let e=await fetch("/api/products?limit=100"),t=await e.json();if(t.success){let e=t.products.filter(e=>e&&e.name&&e.category);u(e)}else f.ZP.error(t.error||"Failed to load products")}catch(e){console.error("Error fetching products:",e),f.ZP.error("Failed to load products")}finally{x(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=await fetch("/api/products/".concat(e),{method:"DELETE"}),r=await t.json();r.success?(f.ZP.success("Product deleted successfully"),N()):f.ZP.error(r.error||"Failed to delete product")}catch(e){console.error("Error deleting product:",e),f.ZP.error("Failed to delete product")}},w=d.filter(e=>{var t,r;let s=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",a=(null===(r=e.category)||void 0===r?void 0:r.toLowerCase())||"",c=g.toLowerCase();return s.includes(c)||a.includes(c)});return"loading"===t||m?(0,s.jsx)(y.Z,{text:"Loading products..."}):e&&"admin"===e.user.role?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Products"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Products: ",w.length]})]}),(0,s.jsx)("div",{className:"mt-4 md:mt-0",children:(0,s.jsx)(l.default,{href:"/admin/add-product",children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 mr-2"}),"Add New Product"]})})})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search products by name or category...",value:g,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]})}),(0,s.jsx)(p,{products:w,onEdit:e=>{r.push("/admin/add-product?id=".concat(e._id))},onDelete:v})]}):null}},6334:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{variant:t="primary",size:r="md",isLoading:a=!1,children:c,className:n="",disabled:l,...i}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(n),disabled:l||a,...i,children:a?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):c})}r(2265)},1215:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{size:t="md",text:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:"animate-spin text-primary-600 ".concat({sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[t]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:r})]})}r(2265)},2746:function(e,t,r){"use strict";r.d(t,{Et:function(){return c},p6:function(){return a},xG:function(){return s}});let s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),c=(e,t)=>Math.round((e-t)/e*100)}},function(e){e.O(0,[64,648,605,157,971,117,744],function(){return e(e.s=6355)}),_N_E=e.O()}]);