(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8205:function(e,t,r){Promise.resolve().then(r.bind(r,8574))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:i="",children:o,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:d?24*Number(c)/Number(a):c,className:l("lucide",i),...u},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:d,...i}=r;return(0,s.createElement)(c,{ref:n,iconNode:t,className:l("lucide-".concat(a(e)),d),...i})});return r.displayName="".concat(e),r}},4794:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6275:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8574:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(7437),a=r(2265),l=r(605),n=r(9376),c=r(7648),d=r(9205);let i=(0,d.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var o=r(6275),m=r(4794);let u=(0,d.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var h=r(9397);let x=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var g=r(1215),p=r(6334),f=r(2746);function y(){let{data:e,status:t}=(0,l.useSession)(),r=(0,n.useRouter)(),[d,y]=(0,a.useState)({totalOrders:0,totalRevenue:0,totalProducts:0,totalUsers:0,recentOrders:[],lowStockProducts:[]}),[w,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if("unauthenticated"===t)r.push("/login");else if("authenticated"===t){var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.role)!=="admin"?r.push("/"):v()}},[t,e]);let v=async()=>{try{let e=await fetch("/api/orders"),t=await e.json(),r=await fetch("/api/products?limit=100"),s=await r.json();if(t.success&&s.success){let e=t.orders,r=s.products,a=e.filter(e=>"completed"===e.paymentInfo.paymentStatus).reduce((e,t)=>e+t.totalAmount,0),l=r.filter(e=>e.stock<10);y({totalOrders:e.length,totalRevenue:a,totalProducts:r.length,totalUsers:0,recentOrders:e.slice(0,5),lowStockProducts:l.slice(0,5)})}}catch(e){console.error("Error fetching dashboard data:",e)}finally{j(!1)}};if("loading"===t||w)return(0,s.jsx)(g.Z,{text:"Loading dashboard..."});if(!e||"admin"!==e.user.role)return null;let N=[{title:"Total Revenue",value:(0,f.xG)(d.totalRevenue),icon:i,color:"bg-green-500",trend:"+12.5%"},{title:"Total Orders",value:d.totalOrders.toString(),icon:o.Z,color:"bg-white-500",trend:"+8.2%"},{title:"Total Products",value:d.totalProducts.toString(),icon:m.Z,color:"bg-purple-500",trend:"+3.1%"},{title:"Total Users",value:d.totalUsers.toString(),icon:u,color:"bg-orange-500",trend:"+5.7%"}];return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",e.user.name,"!"]})]}),(0,s.jsx)("div",{className:"mt-4 md:mt-0 flex space-x-3",children:(0,s.jsx)(c.default,{href:"/admin/add-product",children:(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Add Product"]})})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:N.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"".concat(e.color," p-3 rounded-lg bg-opacity-10"),children:(0,s.jsx)(e.icon,{className:"w-6 h-6 ".concat(e.color.replace("bg-","text-"))})}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,s.jsx)(x,{className:"w-4 h-4 mr-1"}),e.trend]})]}),(0,s.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]},t))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"}),(0,s.jsx)(c.default,{href:"/admin/orders",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"View All →"})]}),0===d.recentOrders.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No orders yet"}):(0,s.jsx)("div",{className:"space-y-4",children:d.recentOrders.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:["#",e._id.slice(-8).toUpperCase()]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.shippingAddress.name})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:(0,f.xG)(e.totalAmount)}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("delivered"===e.orderStatus?"bg-green-100 text-green-800":"cancelled"===e.orderStatus?"bg-red-100 text-red-800":"bg-white-100 text-blue-800"),children:e.orderStatus})]})]},e._id))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Low Stock Alert"}),(0,s.jsx)(c.default,{href:"/admin/products",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"View All →"})]}),0===d.lowStockProducts.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"All products are well stocked"}):(0,s.jsx)("div",{className:"space-y-4",children:d.lowStockProducts.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-grow",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:(0,s.jsx)("img",{src:e.images[0]||"/placeholder-product.jpg",alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 line-clamp-1",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.category})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"text-sm font-bold ".concat(0===e.stock?"text-red-600":"text-yellow-600"),children:0===e.stock?"Out of Stock":"".concat(e.stock," left")})})]},e._id))})]})]}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(c.default,{href:"/admin/products",className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,s.jsx)(m.Z,{className:"w-10 h-10 text-primary-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Manage Products"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Add, edit, or remove products from your store"})]}),(0,s.jsxs)(c.default,{href:"/admin/orders",className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,s.jsx)(o.Z,{className:"w-10 h-10 text-primary-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Manage Orders"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"View and update order status and details"})]}),(0,s.jsxs)(c.default,{href:"/admin/add-product",className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,s.jsx)(h.Z,{className:"w-10 h-10 text-primary-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Add New Product"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Add new products to your inventory"})]})]})]})}},6334:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{variant:t="primary",size:r="md",isLoading:a=!1,children:l,className:n="",disabled:c,...d}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(n),disabled:c||a,...d,children:a?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):l})}r(2265)},1215:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{size:t="md",text:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsxs)("svg",{className:"animate-spin text-primary-600 ".concat({sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[t]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:r})]})}r(2265)},2746:function(e,t,r){"use strict";r.d(t,{Et:function(){return l},p6:function(){return a},xG:function(){return s}});let s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),l=(e,t)=>Math.round((e-t)/e*100)}},function(e){e.O(0,[648,605,971,117,744],function(){return e(e.s=8205)}),_N_E=e.O()}]);